/// Auto-generated by Deno Win32: Windows.Win32.Media.PictureAcquisition.Apis

import * as util from "../../util.ts";

// Enums
export type USER_INPUT_STRING_TYPE = number;
export type ERROR_ADVISE_MESSAGE_TYPE = number;
export type ERROR_ADVISE_RESULT = number;
export type PROGRESS_DIALOG_IMAGE_TYPE = number;
export type PROGRESS_DIALOG_CHECKBOX_ID = number;
export type DEVICE_SELECTION_DEVICE_TYPE = number;

// Constants
export const PROGRESS_INDETERMINATE = `-1`;
export const PHOTOACQ_ERROR_RESTART_REQUIRED = 7926411350061129729n;
export const PHOTOACQ_RUN_DEFAULT = 0;
export const PHOTOACQ_NO_GALLERY_LAUNCH = 1;
export const PHOTOACQ_DISABLE_AUTO_ROTATE = 2;
export const PHOTOACQ_DISABLE_PLUGINS = 4;
export const PHOTOACQ_DISABLE_GROUP_TAG_PROMPT = 8;
export const PHOTOACQ_DISABLE_DB_INTEGRATION = 16;
export const PHOTOACQ_DELETE_AFTER_ACQUIRE = 32;
export const PHOTOACQ_DISABLE_DUPLICATE_DETECTION = 64;
export const PHOTOACQ_ENABLE_THUMBNAIL_CACHING = 128;
export const PHOTOACQ_DISABLE_METADATA_WRITE = 256;
export const PHOTOACQ_DISABLE_THUMBNAIL_PROGRESS = 512;
export const PHOTOACQ_DISABLE_SETTINGS_LINK = 1024;
export const PHOTOACQ_ABORT_ON_SETTINGS_UPDATE = 2048;
export const PHOTOACQ_IMPORT_VIDEO_AS_MULTIPLE_FILES = 4096;
export const DSF_WPD_DEVICES = 1;
export const DSF_WIA_CAMERAS = 2;
export const DSF_WIA_SCANNERS = 4;
export const DSF_STI_DEVICES = 8;
export const DSF_TWAIN_DEVICES = 16;
export const DSF_FS_DEVICES = 32;
export const DSF_DV_DEVICES = 64;
export const DSF_ALL_DEVICES = 65535;
export const DSF_CPL_MODE = 65536;
export const DSF_SHOW_OFFLINE = 131072;
export const PAPS_PRESAVE = 0;
export const PAPS_POSTSAVE = 1;
export const PAPS_CLEANUP = 2;
export const USER_INPUT_DEFAULT = 0;
export const USER_INPUT_PATH_ELEMENT = 1;
export const PHOTOACQUIRE_ERROR_SKIPRETRYCANCEL = 0;
export const PHOTOACQUIRE_ERROR_RETRYCANCEL = 1;
export const PHOTOACQUIRE_ERROR_YESNO = 2;
export const PHOTOACQUIRE_ERROR_OK = 3;
export const PHOTOACQUIRE_RESULT_YES = 0;
export const PHOTOACQUIRE_RESULT_NO = 1;
export const PHOTOACQUIRE_RESULT_OK = 2;
export const PHOTOACQUIRE_RESULT_SKIP = 3;
export const PHOTOACQUIRE_RESULT_SKIP_ALL = 4;
export const PHOTOACQUIRE_RESULT_RETRY = 5;
export const PHOTOACQUIRE_RESULT_ABORT = 6;
export const PROGRESS_DIALOG_ICON_SMALL = 0;
export const PROGRESS_DIALOG_ICON_LARGE = 1;
export const PROGRESS_DIALOG_ICON_THUMBNAIL = 2;
export const PROGRESS_DIALOG_BITMAP_THUMBNAIL = 3;
export const PROGRESS_DIALOG_CHECKBOX_ID_DEFAULT = 0;
export const DST_UNKNOWN_DEVICE = 0;
export const DST_WPD_DEVICE = 1;
export const DST_WIA_DEVICE = 2;
export const DST_STI_DEVICE = 3;
export const DSF_TWAIN_DEVICE = 4;
export const DST_FS_DEVICE = 5;
export const DST_DV_DEVICE = 6;

// Structs

/**
 * Windows.Win32.UI.Shell.PropertiesSystem.PROPERTYKEY (size: 16)
 */
export interface PROPERTYKEY {
  /** System.Guid */
  fmtid: Uint8Array | Deno.PointerValue;
  /** u32 */
  pid: number;
}

export const sizeofPROPERTYKEY = 16;

export function allocPROPERTYKEY(data?: Partial<PROPERTYKEY>): Uint8Array {
  const buf = new Uint8Array(sizeofPROPERTYKEY);
  const view = new DataView(buf.buffer);
  // 0x00: pointer
  if (data?.fmtid !== undefined) view.setBigUint64(0, data.fmtid === null ? 0n : BigInt(Deno.UnsafePointer.value(util.toPointer(data.fmtid))), true);
  // 0x08: u32
  if (data?.pid !== undefined) view.setUint32(8, Number(data.pid), true);
  // 0x0c: pad4
  return buf;
}

export class PROPERTYKEYView {
  private readonly view: DataView;
  constructor(private readonly buf: Uint8Array) {
    this.view = new DataView(buf.buffer);
  }

  get buffer(): Uint8Array {
    return this.buf;
  }

  // 0x00: pointer
  get fmtid(): Uint8Array | Deno.PointerValue {
    const ptr = this.view.getBigUint64(0, true);
    return Deno.UnsafePointer.create(ptr);
  }

  // 0x08: u32
  get pid(): number {
    return this.view.getUint32(8, true);
  }

  // 0x0c: pad4

  // 0x00: pointer
  set fmtid(value: Uint8Array | Deno.PointerValue) {
    this.view.setBigUint64(0, BigInt(Deno.UnsafePointer.value(util.toPointer(value))), true);
  }

  // 0x08: u32
  set pid(value: number) {
    this.view.setUint32(8, value, true);
  }

  // 0x0c: pad4
}

// Native Libraries

// Symbols

